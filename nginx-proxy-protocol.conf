stream {
    upstream minecraft_backend {
        server minecraft:25565;
    }

    server {
        listen 25566 proxy_protocol;
        proxy_pass minecraft_backend;
        proxy_protocol on;
        
        # Настройки для Proxy Protocol
        set_real_ip_from 172.18.0.0/16;  # Docker сеть
        real_ip_header proxy_protocol;
        real_ip_recursive on;
    }
}

http {
    # Дополнительная конфигурация для HTTP запросов, если понадобится
    server {
        listen 8080;
        server_name localhost;
        
        location / {
            return 200 "Minecraft Proxy is running";
            add_header Content-Type text/plain;
        }
    }
}